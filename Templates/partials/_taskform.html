{% if session.get('is_authenticated') %}
<form action="/new" method="post" class="card bg-dark text-light" style="margin-left: 20px; max-width: 400px;">
    <div class="card-header text-center">
        <h5><i class="fas fa-plus-circle"></i> Agregar Nuevo Anime</h5>
        <small class="text-muted">Usuario: {{ session.get('username') }}</small>
    </div>
    <div class="card-body p-4">
        <div class="mb-3">
            <label for="name">Nombre del Anime</label>
            <input type="text" name="name" placeholder="Nombre del anime" 
            class="form-control rounded-0 bg-light border-0" required>
        </div>

        <div class="mb-3">
            <label for="genre">Género</label>
            <select name="genre" class="form-control rounded-0 bg-light border-0" required>
                <option value="">Selecciona un género</option>
                {% for genre in genres %}
                <option value="{{ genre.name }}">{{ genre.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="year">Año</label>
            <input type="number" name="year" placeholder="Año de lanzamiento"
            class="form-control rounded-0 bg-light border-0" 
            min="1900" max="2100" required>
        </div>

        <div class="mb-3">
            <label for="type">Tipo</label>
            <select name="type" class="form-control rounded-0 bg-light border-0" required>
                <option value="">Selecciona un tipo</option>
                <option value="TV">TV</option>
                <option value="Película">Película</option>
                <option value="OVA">OVA</option>
                <option value="Especial">Especial</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="status">Estado</label>
            <select name="status" class="form-control rounded-0 bg-light border-0" required>
                <option value="">Selecciona un estado</option>
                <option value="En emisión">En emisión</option>
                <option value="Finalizado">Finalizado</option>
                <option value="Próximamente">Próximamente</option>
            </select>
        </div>

        <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Guardar Anime
            </button>
            <a href="{{ url_for('users.dashboard') }}" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left"></i> Volver al Dashboard
            </a>
        </div>
    </div>
</form>
{% else %}
<div class="card bg-warning text-dark" style="margin-left: 20px; max-width: 400px;">
    <div class="card-body text-center p-4">
        <i class="fas fa-lock fa-3x mb-3"></i>
        <h5>Autenticación Requerida</h5>
        <p class="mb-3">Para agregar animes necesitas iniciar sesión.</p>
        <div class="d-grid gap-2">
            <a href="{{ url_for('users.login_page') }}" class="btn btn-success">
                <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
            </a>
            <a href="{{ url_for('users.register_page') }}" class="btn btn-outline-primary">
                <i class="fas fa-user-plus"></i> Registrarse
            </a>
        </div>
    </div>
</div>
{% endif %}

<!-- Font Awesome para iconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">